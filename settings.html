<!-- settings.html - Updated -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - NexusOS</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="nexusos-settings.js"></script>
    <style>
        /* Your existing CSS here, but we'll use CSS variables from settings */
        :root {
            --primary: #00f5ff;
            --primary-dark: #00a8cc;
            --secondary: #9d4edd;
            --accent: #ff006e;
            --dark: #0c0f1d;
            --light: #e2eafc;
            --panel-bg: rgba(20, 25, 50, 0.7);
            --panel-border: rgba(0, 245, 255, 0.3);
            --radius: 12px;
            --transition: all 0.3s ease;
            --font-size: 16px;
        }

        /* Rest of your CSS remains the same */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', sans-serif;
            font-size: var(--font-size);
        }
        
        /* ... rest of your existing CSS ... */
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <a href="index.html" class="back-btn">
                <i class="fas fa-arrow-left"></i>
                Back to Desktop
            </a>
            <h1 class="app-title">
                <i class="fas fa-cogs"></i>
                Settings
            </h1>
        </div>

        <div class="settings-container">
            <!-- Settings sidebar and content remains the same -->
            <div class="settings-sidebar">
                <div class="nav-item active" data-section="appearance">
                    <i class="fas fa-palette"></i>
                    Appearance
                </div>
                <div class="nav-item" data-section="system">
                    <i class="fas fa-desktop"></i>
                    System
                </div>
                <div class="nav-item" data-section="about">
                    <i class="fas fa-info-circle"></i>
                    About
                </div>
            </div>

            <div class="settings-content">
                <div class="section-content active" id="appearance-section">
                    <h2 class="section-title">Appearance</h2>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <div class="setting-title">Dark Mode</div>
                            <div class="setting-description">Switch between dark and light theme</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" class="toggle-input" id="dark-mode-toggle" 
                                   checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <div class="setting-title">Color Scheme</div>
                            <div class="setting-description">Choose your preferred color theme</div>
                        </div>
                        <div class="color-scheme">
                            <div class="color-option theme-blue active" data-theme="blue">
                                <div class="color-preview" style="background: linear-gradient(135deg, #00f5ff, #0066cc);"></div>
                                <span>Blue</span>
                            </div>
                            <div class="color-option theme-purple" data-theme="purple">
                                <div class="color-preview" style="background: linear-gradient(135deg, #9d4edd, #7b2cbf);"></div>
                                <span>Purple</span>
                            </div>
                            <div class="color-option theme-green" data-theme="green">
                                <div class="color-preview" style="background: linear-gradient(135deg, #38b000, #2a9400);"></div>
                                <span>Green</span>
                            </div>
                            <div class="color-option theme-red" data-theme="red">
                                <div class="color-preview" style="background: linear-gradient(135deg, #ef233c, #cc001f);"></div>
                                <span>Red</span>
                            </div>
                        </div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <div class="setting-title">Font Size</div>
                            <div class="setting-description">Adjust the interface font size</div>
                        </div>
                        <select class="select-input" id="font-size">
                            <option value="small">Small</option>
                            <option value="medium" selected>Medium</option>
                            <option value="large">Large</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <div class="setting-title">Animations</div>
                            <div class="setting-description">Enable or disable interface animations</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" class="toggle-input" id="animations-toggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- System Section -->
                <div class="section-content" id="system-section">
                    <h2 class="section-title">System Settings</h2>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <div class="setting-title">Auto-save</div>
                            <div class="setting-description">Automatically save documents while editing</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" class="toggle-input" id="autosave-toggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <div class="button-group">
                        <button class="btn btn-primary" id="reset-settings">
                            <i class="fas fa-undo"></i> Reset to Defaults
                        </button>
                        <button class="btn btn-secondary" id="clear-data">
                            <i class="fas fa-trash"></i> Clear All Data
                        </button>
                    </div>
                </div>

                <!-- About Section remains the same -->
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize settings from our global instance
            const settings = window.nexusSettings;
            
            // Set initial values
            document.getElementById('dark-mode-toggle').checked = settings.getSetting('theme') === 'dark';
            document.getElementById('font-size').value = settings.getSetting('fontSize');
            document.getElementById('animations-toggle').checked = settings.getSetting('animations');
            document.getElementById('autosave-toggle').checked = settings.getSetting('autosave');

            // Update color scheme active state
            document.querySelectorAll('.color-option').forEach(option => {
                option.classList.remove('active');
                if (option.getAttribute('data-theme') === settings.getSetting('colorScheme')) {
                    option.classList.add('active');
                }
            });

            // Event listeners
            document.getElementById('dark-mode-toggle').addEventListener('change', function() {
                settings.updateSetting('theme', this.checked ? 'dark' : 'light');
            });

            document.getElementById('font-size').addEventListener('change', function() {
                settings.updateSetting('fontSize', this.value);
            });

            document.getElementById('animations-toggle').addEventListener('change', function() {
                settings.updateSetting('animations', this.checked);
            });

            document.getElementById('autosave-toggle').addEventListener('change', function() {
                settings.updateSetting('autosave', this.checked);
            });

            document.querySelectorAll('.color-option').forEach(option => {
                option.addEventListener('click', function() {
                    const theme = this.getAttribute('data-theme');
                    settings.updateSetting('colorScheme', theme);
                    
                    document.querySelectorAll('.color-option').forEach(opt => {
                        opt.classList.remove('active');
                    });
                    this.classList.add('active');
                });
            });

            document.getElementById('reset-settings').addEventListener('click', function() {
                if (confirm('Are you sure you want to reset all settings to default?')) {
                    localStorage.removeItem('nexusos-settings');
                    window.nexusSettings = new NexusSettings();
                    location.reload();
                }
            });

            document.getElementById('clear-data').addEventListener('click', function() {
                if (confirm('This will delete all your files and settings. Continue?')) {
                    localStorage.clear();
                    location.reload();
                }
            });

            // Navigation code remains the same
            const navItems = document.querySelectorAll('.nav-item');
            const sectionContents = document.querySelectorAll('.section-content');
            
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    const section = this.getAttribute('data-section');
                    
                    navItems.forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');
                    
                    sectionContents.forEach(content => {
                        content.classList.remove('active');
                        if (content.id === `${section}-section`) {
                            content.classList.add('active');
                        }
                    });
                });
            });
        });
    </script>
</body>
</html>